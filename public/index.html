<!DOCTYPE>
<html ng-app = "appTodo">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">.

    <title>To-Do List</title>

    <style>
    .pagestyle { font: italic bold 14px/30px Georgia, serif; background-color: Azure;  }
    .completed-task{ text-decoration:line-through; }
    </style>
    <!-- Bootstrap -->
    <link href = "//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel = "stylesheet">

    <!--load angular.js file-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src = "//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="app.js"></script>
</head>

<body ng-controller = "mainCtrl" class= "pagestyle">
    <div class ="text-center">

        <form ng-submit = "createTodo()">
            <input type="text" size="40%" placeholder="Add a to-do here..." ng-model="formData.text" oninvalid="this.setCustomValidity('Empty field! Please enter a new item to be added')" oninput="setCustomValidity('')" autofocus="" required />
            <button type="submit" class ="btn btn-success"> Add </button>
        </form>

        <h3><b>To-Dos List</b></h3>
        <div ng-repeat="todo in todos | filter : notDoneFilter">
            <span ng-show="!isEditable[$index]">
                <input type="checkbox" ng-model="newItem.done" ng-change= "updateTodo(todo._id)" > {{ todo.text }}
            </span>
            <form ng-submit="updateTodo(todo._id)" ng-if = "isEditable[$index]">
                <input  type="text" ng-value="todo.text" ng-model="newItem.text" required = "true" />
                <button type="submit" class="btn btn-xs btn-success"> Save </button>
                <button type="submit" ng-click="isEditable[$index] = false; newItem.text = null" class="btn btn-xs btn-warning"> Cancel </button>
            </form>
            <span ng-show="!isEditable[$index]" ng-click="isEditable[$index] = true" class="btn btn-xs btn-info">Edit</span>
        </div>
        

        <h3><b>Completed tasks</b></h3>
        <div class="completed-task" ng-repeat="todo in todos | filter : doneFilter">
            <span ng-show="!isEditable[$index]">
            <input type="checkbox" ng-model="todo.done" ng-change="updateTodo(todo._id)"> {{ todo.text }}
            <span ng-show="!isEditable[$index]" ng-click = "deleteTodo(todo._id)" class="btn btn-xs btn-danger">Delete</span>
            </span>
        </div>
    </div>
</body>

</html>